<page-heading [text]="titleText"></page-heading>
<p>Start editing to see some magic happen :)</p>

<div [formGroup]="gpe" style="width:100%; height:50%">
  <div formGroupName="catGpe">
    <mat-checkbox formControlName="chck">check me</mat-checkbox><br />
    <mat-form-field
      appearance="outline"
      floatLabel="auto"
      *ngIf="gpe.get('catGpe.chck')?.value === true"
    >
      <mat-select formControlName="category">
        <mat-option *ngFor="let cat of categories$ | async" [value]="cat">
          {{ cat.description }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="gpe.get('catGpe').hasError('catMissing')">
        error in select
      </mat-error>
    </mat-form-field>
  </div>

  <button type="submit" (click)="onSubmit()" [disabled]="gpe.invalid">
    submit
  </button>
</div>

grp catGpe has error : {{ gpe.get('catGpe').hasError('catMissing') }} <br />
form is valid: {{ gpe.valid }}
<br />
{{ gpe?.value | json }}
